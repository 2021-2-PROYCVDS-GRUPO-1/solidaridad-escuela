<!-- Dropdown menu from: https://tailwindcomponents.com/component/multi-level-dropdown-menu -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui">


<f:view contentType="text/html;charset=UTF-8" encoding="UTF-8">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
        </link>

        <!-- MATERIAL ICONS -->
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.min.css"
              integrity="sha256-x8PYmLKD83R9T/sYmJn1j3is/chhJdySyhet/JuHnfY=" crossorigin="anonymous" />

        <style>
            .dropdown-menu[data-show] {
                display: flex;
            }
        </style>

        <f:metadata>
            <f:event type="preRenderView" listener="#{offerBean.generateList}"/>
        </f:metadata>


    </h:head>
    <h:body>
        <div class="min-h-screen bg-gray-200 flex flex-col">
            <nav class="bg-blue-200 flex">
                <!-- NAVIGATION -->
                <div class="flex-1">
                    <!-- OPTION 1 -->
                    <div class="dropdown relative inline-flex cursor-pointer">
                        <!-- dropdown text -->
                        <span
                                class="dropdown-text flex px-4 py-3 bg-gray-400 rounded text-gray-800 items-center hover:bg-gray-800 hover:text-white whitespace-no-wrap">Dropdown
                            Level 1
                            <i
                                    class="material-icons ml-2 h-4 w-4 text-2xl inline-flex items-center justify-center">keyboard_arrow_down</i>
                        </span>
                        <!-- dropdown text -->
                        <!-- dropdown menu -->
                        <div class="dropdown-menu flex flex-col hidden absolute w-full">
                            <div class="rounded flex flex-col flex-grow bg-gray-400 divide-y divide-gray-200">
                                <div class="dropdown-item flex min-w-full">
                                    <a href="#"
                                       class="dropdown-link flex flex-grow px-4 py-3 text-gray-800 whitespace-no-wrap rounded hover:bg-gray-800 hover:text-white items-center justify-center">Link
                                        One</a>
                                </div>
                                <div class="dropdown-item flex min-w-full">
                                    <a href="#"
                                       class="dropdown-link flex flex-grow px-4 py-3 text-gray-800 whitespace-no-wrap rounded hover:bg-gray-800 hover:text-white items-center justify-center">Link
                                        Two</a>
                                </div>
                            </div>
                        </div>
                        <!-- dropdown menu -->
                    </div>
                    <!-- OPTION 1 END -->

                    <!-- OPTION 2 -->
                    <div class="dropdown relative inline-flex cursor-pointer">
                        <!-- dropdown text -->
                        <span
                                class="dropdown-text flex px-4 py-3 bg-gray-400 rounded text-gray-800 items-center hover:bg-gray-800 hover:text-white whitespace-no-wrap">Dropdown
                            Level 1
                            <i
                                    class="material-icons ml-2 h-4 w-4 text-2xl inline-flex items-center justify-center">keyboard_arrow_down</i>
                        </span>
                        <!-- dropdown text -->
                        <!-- dropdown menu -->
                        <div class="dropdown-menu flex flex-col hidden absolute w-full">
                            <div class="rounded flex flex-col flex-grow bg-gray-400 divide-y divide-gray-200">
                                <div class="dropdown-item flex min-w-full">
                                    <a href="#"
                                       class="dropdown-link flex flex-grow px-4 py-3 text-gray-800 whitespace-no-wrap rounded hover:bg-gray-800 hover:text-white items-center justify-center">Link
                                        One</a>
                                </div>
                                <div class="dropdown-item flex min-w-full">
                                    <a href="#"
                                       class="dropdown-link flex flex-grow px-4 py-3 text-gray-800 whitespace-no-wrap rounded hover:bg-gray-800 hover:text-white items-center justify-center">Link
                                        Two</a>
                                </div>
                            </div>
                        </div>
                        <!-- dropdown menu -->
                    </div>
                    <!-- OPTION 2 END -->
                </div>
                <!-- NAVIGATION END -->

                <!-- USER MENU -->
                <div class="dropdown relative inline-flex cursor-pointer">
                    <!-- dropdown text -->
                    <span
                            class="dropdown-text flex px-4 py-3 bg-gray-400 rounded text-gray-800 items-center hover:bg-gray-800 hover:text-white whitespace-no-wrap">USER
                        <i
                                class="material-icons ml-2 h-4 w-4 text-2xl inline-flex items-center justify-center">keyboard_arrow_down</i>
                    </span>
                    <!-- dropdown text -->
                    <!-- dropdown menu -->
                    <div class="dropdown-menu flex flex-col hidden absolute w-full">
                        <div class="rounded flex flex-col flex-grow bg-gray-400 divide-y divide-gray-200">
                            <div class="dropdown-item flex min-w-full">
                                <a href="#"
                                   class="dropdown-link flex flex-grow px-4 py-3 text-gray-800 whitespace-no-wrap rounded hover:bg-gray-800 hover:text-white items-center justify-center">Link
                                    One</a>
                            </div>
                            <div class="dropdown-item flex min-w-full">
                                <a href="#"
                                   class="dropdown-link flex flex-grow px-4 py-3 text-gray-800 whitespace-no-wrap rounded hover:bg-gray-800 hover:text-white items-center justify-center">Link
                                    Two</a>
                            </div>
                        </div>
                    </div>
                    <!-- dropdown menu -->
                </div>
                <!-- USER MENU END -->
            </nav>


            <!-- UPDATE OFFER FORM -->
            <!--  -->
            <div class="container max-w-3xl bg-yellow-300 mt-12 mx-auto">
                <h2 class="text-center text-3xl">Editar Oferta</h2>

                <!-- <form action="" class="grid grid-cols-1 grid-rows-3 gap-y-1"> -->
                <h:form id="categoryCreate" class="flex flex-col">
                    <!-- ROW 1 -->
                    <div class="flex bg-green-400 px-2 my-4 h-8">

                        <div class="flex bg-green-400 px-2 my-4 h-8">
                            <p:selectOneMenu id="offerName" value="#{offerBean.name}"
                                             style="width:125px">
                                <f:selectItem itemLabel="Seleccione una Categoria" itemValue="" />
                                <f:selectItems value="#{offerBean.offerByUser}" />
                            </p:selectOneMenu>
                        </div>


                        <p:selectOneMenu id="createOfferState" value="#{offerBean.status}" style="width:125px">
                            <f:selectItem itemLabel="Seleccione un estado" itemValue="" />
                            <f:selectItems value="#{offerBean.statusList}" />
                        </p:selectOneMenu>


                    </div>
                    <!-- ROW 1 END -->

                    <!-- ROW 2 -->
                    <div class="flex bg-green-400 px-2 my-4 h-8">
                        <p>Categoría</p>
<!--                        <h:inputText id="updateOfferCategory" class="flex-1 pl-4 mr-4 rounded border-2 border-gray-500" type="int" value="#{offerBean.offerCategory}" placeholder="categoria"/>-->
                    </div>
                    <!-- ROW 2 END -->

                    <!-- ROW 3 -->
                    <p>Descripción</p>
<!--                    <h:inputTextarea id="updateOfferDescription" value="#{offerBean.description}" cols="30" rows="10" placeholder="Descripción"-->
<!--                                     class="pl-4 mx-2 rounded border-2 border-gray-500"/>-->
                    <!-- ROW 3 END -->

                    <!-- ROW 3 -->
                    <p>Fecha de hoy</p>
<!--                    <h:inputText id="updateOfferTodayDate" class="flex-1 pl-4 mr-4 rounded border-2 border-gray-500" type="String" value="#{categoryBean.name}" placeholder="fecha de hoy"/>-->
                    <!-- ROW 3 END -->

                    <!-- ROW 3 -->
                    <h:commandButton class="mx-2 my-4 bg-white rounded h-10 border-2 border-gray-500" value="Actualizar Oferta" actionListener="#{offerBean.changeStatus}" update="categoryCreate"/>

                    <!-- ROW 3 END -->


                </h:form>

                <h:form id="graficas">
                    <h1 align="center">Diagrama circular</h1>
                    <p:chart  type="pie" model="#{offerBean.pieModel}" style="width: 50%; height: 500px;margin: auto"/>
                </h:form>
            </div>




        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
                integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.0/umd/popper.min.js"
                integrity="sha256-FT/LokHAO3u6YAZv6/EKb7f2e0wXY3Ff/9Ww5NzT+Bk=" crossorigin="anonymous"></script>
        <script>
            $(document).ready(function () {
                $(".dropdown").each(function (_, dropdown) {
                    const dropdownMenu = $(dropdown).find("> .dropdown-menu")[0];
                    let popperInstance = null;

                    function create() {
                        popperInstance = Popper.createPopper(dropdown, dropdownMenu, {
                            // placement: "auto-start",
                            placement: "bottom",
                            strategy: "absolute",
                            modifiers: [
                                {
                                    name: "flip",
                                    options: {
                                        fallbackPlacements: ["top", "bottom", "left", "right"],
                                    },
                                },
                            ],
                        });
                    }

                    function destroy() {
                        if (popperInstance) {
                            popperInstance.destroy();
                            popperInstance = null;
                        }
                    }

                    function show() {
                        $(dropdownMenu).attr("data-show", "");
                        create();
                    }

                    function hide() {
                        $(dropdownMenu).removeAttr("data-show");
                        destroy();
                    }

                    $(dropdown).on("mouseenter focus", show);
                    $(dropdown).on("mouseleave blur", hide);
                });
            });
        </script>
    </h:body>
</f:view>

</html>