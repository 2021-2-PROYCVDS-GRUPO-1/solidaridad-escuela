<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.eci.cvds.persistence.mybatis.mappers.NeedMapper">
    <!-- GET USER BY USERNAME -->
    <select id="getNeedByName" resultMap="NeedResult">
        SELECT
        id AS n_id,
        category AS n_category,
        name AS n_name,
        description AS n_description,
        urgency As n_urgency,
        status AS n_status,
        creationDate AS n_dateCreation,
        modificationDate AS n_dateModification
        FROM Need
        WHERE #{name} = name;
    </select>

    <!-- GET USER BY EMAIL -->
    <select id="getNeedByID" resultMap="NeedResult">
        SELECT
        id AS n_id,
        category AS n_category,
        name AS o_name,
        description AS n_description,
        urgency As n_urgency,
        status AS n_status,
        dateCreation AS n_dateCreation,
        dateModification AS n_dateModification
        FROM Need
        WHERE #{id} = id;
    </select>

    <!-- ADD NECESSITY -->
    <insert parameterType="map" id="registerNeed">

        INSERT INTO DB_NEEDS (category,
        name,
        description,
        urgency,
        status,
        createdbyuser) VALUES (
        #{categoryId},
        #{name},
        #{description},
        #{status},
        #{urgency},
        #{createdByUser});
    </insert>


    <resultMap id="NeedResult" type="Need" >
        <id property="id" column="id"/>
        <result property="name" column="name" />
        <result property="description" column="description" />
        <result property=" urgency" column=" urgency"/>
        <result property="creationDate" column="creationDate" />
        <result property="status" column="status" />
        <result property="modificationDate" column="modificationDate" />
    </resultMap>
</mapper>